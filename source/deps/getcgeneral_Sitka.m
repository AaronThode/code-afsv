
%%%%%%%%%%%%%%%%%%%%getcgeneral_crude.m%%%%%%%%%%%%%%%%
% Create a linear sound speed profile
function [c,dcdz]=getcgeneral_Sitka(z)
persistent Data

dz=0.1;

if isempty(Data)
    %Data=load('../MetaData.dir/SSP_smooth.mat');
    svp=[
            0 1501.699279
            10 1500.129321
            20 1495.362124
            30 1494.693787
            40 1488.814806
            50 1483.318303
            60 1482.89442
            70 1481.439363
            80 1480.371806
            90 1478.965287
            100 1478.34788
            110 1478.19982
            120 1478.034506
            130 1477.489494
            140 1476.463043
            150 1476.166747
            160 1475.594623
            170 1474.776835
            180 1473.970089
            190 1473.648046
            200 1473.586663
            210 1473.245855
            220 1473.067973
            230 1473.070671
            240 1472.678043
            250 1472.91089
            260 1472.847229
            270 1472.832474
            280 1472.900289
            290 1472.836019
            300 1472.920464
            310 1472.822331
            320 1472.723867
            330 1472.741726
            340 1472.809204
            350 1472.810153
            360 1472.894317
            380 1473.146008
            390 1473.313575
            400 1473.381034
            410 1473.548666
            420 1473.7331
            430 1473.78384
            440 1473.95157
            450 1474.119335
            460 1474.287133
            470 1474.429429
            480 1474.533429
            490 1474.637429
            500 1474.741429
            510 1474.845429
            520 1474.949429
            530 1475.053429
            540 1475.157429
            550 1475.261429
            560 1475.365429
            570 1475.469429
            580 1475.573429
            590 1475.677429
            600 1475.781429
            610 1475.885429
            620 1475.989429
            630 1476.093429
            640 1476.197429
            650 1476.301429
            660 1476.405429
            670 1476.509429
            680 1476.613429
            690 1476.717429
            700 1476.821429
            710 1476.925429
            720 1477.029429
            730 1477.133429
            740 1477.237429
            750 1477.341429
            760 1477.445429
            770 1477.549429
            780 1477.653429
            790 1477.757429
            800 1477.861429
            810 1477.965429
            820 1478.069429
            830 1478.173429
            840 1478.277429
            850 1478.381429
            860 1478.485429
            870 1478.589429
            880 1478.693429
            890 1478.797429
            900 1478.901429
            910 1479.005429
            920 1479.109429
            930 1479.213429
            940 1479.317429
            950 1479.421429
            960 1479.525429
            970 1479.629429
            980 1479.733429
            990 1479.837429
            1000 1479.941429
            1010 1480.045429
            1020 1480.149429
            1030 1480.253429
            1040 1480.357429
            1050 1480.461429
            1060 1480.565429
            1070 1480.669429
            1080 1480.773429
            1090 1480.877429
            1100 1480.981429
            1110 1481.085429
            1120 1481.189429
            1130 1481.293429
            1140 1481.397429
            1150 1481.501429
            1160 1481.605429
            1170 1481.709429
            1180 1481.813429
            1190 1481.917429
            1200 1482.021429  ];
        Data.Z=svp(:,1);
        Data.C=svp(:,2);
end

if z<0
    z=0.05;
end

if z>=(max(Data.Z)-dz)
    z=max(Data.Z)-2*dz;
    
end

c=interp1(Data.Z,Data.C,z);
cp=interp1(Data.Z,Data.C,z+dz);
dcdz=(cp-c)/dz;